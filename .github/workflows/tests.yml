name: actinia tests

on:
- push
- pull_request

jobs:

  alpine-tests:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
      # with:
      #   path: "."

    # - name: Set up QEMU
    #   uses: docker/setup-qemu-action@v1
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v1
    - name: test
      run: |
        ls
        ls docker
        ls docker/actinia-core-tests
    #   id: buildx
    #   with:
    #     install: true
    # - name: Build
    #   run: |
    #     ls
    #     docker build --file docker/actinia-core-tests/Dockerfile --tag actinia-core-test:latest-alpine .
    - name: Build actinia
      id: docker_build
      uses: docker/build-push-action@v2
      with:
        push: false
        tags: actinia-core-tests:0.99.24-alpine
        context: .
        file: docker/actinia-core-tests/Dockerfile
        no-cache: true
        # pull: true
    # - name: Build actinia tests
    #   id: docker_build
    #   uses: docker/build-push-action@v2
    #   with:
    #     push: false
    #     tags: actinia-core-test:latest-alpine
    #     context: .
    #     file: docker/actinia-core-tests/Dockerfile
    #     no-cache: true
    #     pull: false
